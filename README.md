# *JavaScript best practices*

## Переменные, объекты.

### 1. Избегайте глобальных переменных.

Минимизируйте использование глобальных переменных.
Это включает в себя все типы данных, объекты и функции.
Глобальные переменные и функции могут быть перезаписаны другими скриптами.
Вместо этого используйте локальные переменные и научитесь использовать замыкания.

### 2. Всегда объявляйте локальные переменные.

Как следствие, мы должны всегда объявлять локальные переменные и постоянные также с помощью var, let или const. 
В противном случае переменная будет объявлена как глобальная и как свойство объекта window, чего мы определенно не хотим. 

Например, никогда не стоит писать:
```
x = 1;
```

Следует писать так:
```
let x = 1;
```

К счастью, JavaScript strict mode (строгий режим) не позволяет необъявленные переменные, поэтому случайно создать глобальные переменные нельзя.

В модулях JavaScript strict mode тоже доступен по умолчанию, поэтому и в них невозможно случайно создать глобальные переменные. 

### 3. Простые и понятные имена переменных, функций и классов.

#### Названия функций должны быть краткими и содержательными. 
Например, если мы хотим создать переменную для хранения чьего-то дня рождения, она должна иметь имя, явно указывающее на это.

Это означает, что не должно быть имён типа `b`, также как и не должно быть излишне громоздкое и перенасыщенное посторонними словами вроде `soVeryUselessLongBirthdayVariable`. Было бы уместно назвать его просто `birthday`.

Кроме этого, лучше избегать комбинирования имени с функциональностью в названии переменной. 
Например, если мы хотим написать функцию по проверке достижения пользователем совершеннолетия, мы должны назвать её чем-то вроде `isAdult()`, а не `isOverEighteen()`.
Это также имеет больше смысла, так как не в каждом месте возраст 18 лет является возрастом совершеннолетия.

Также рекомендуется хранить имена на английском языке, так как это сохраняет консистентность стиля в соответствии с остальным кодом. 
Все зарезервированные слова, такие как `function` и `new` - всё на английском языке, так что всё остальное должно быть на английском.
Английский также более интернациональный язык, так что вероятность больше, что разработчики знают английский язык, и смогут прочитать ваш код.

Названия функций и переменных могут содержать латинские буквы, цифры и знак `$`, но имена должны начинаться с латинской буквы. 
В имени переменной или функции должно отображаться её содержание. 
Если название переменной или функции состоит из нескольких слов, то каждое последующее слово пишется с заглавной буквы - **camelCase**.
Также надо помнить, что js чувствителен к регистру.
  
Как не стоит называть переменные или функции: 
    
 ``` 
    let a = Sergey;
    const 5m = 25 ;
    function abc();
    function startplay();
 ```
 
Хорошие примеры: 
   
 ``` 
   let name = Sergey;
   const number = 25;
   function startPlay();
   function read45Page();
 ```

### 4. Инициализируйте переменные при их объявлении.

Инициализировать переменные и константы с объявленными значениями весьма хорошая идея. Это предотвращает ошибки неопределенных значений. 
Также удобно объявлять переменные или константы и задавать их начальные значения одной строкой. 

В противном случае у нас будут отдельные строки для объявления и для значения. 

Например, мы можем написать:
```
let x = 1,
  y = 1;
```  
Чтобы объявить и x, и y. 

Это существенно короче, чем: 
```
let x;
let y;
x = 1;
y = 1;
```
Мы можем объявлять и инициализировать несколько переменных, разделив каждое объявление и назначение запятыми. 

### 5. Объекты.

Никогда не объявляйте числовые (number), строковые (string) или логические (boolean) объекты
Всегда обрабатывайте числа, строки или логические значения как примитивные значения. Но не как объекты.

Объявление этих типов как объектов замедляет скорость выполнения и вызывает неприятные побочные эффекты: 

```
var x = "John";             
var y = new String("John");
(x === y) // является false, потому что x является строкой и y является объектом.
```

Или еще хуже:
```
var x = new String("John");             
var y = new String("John");
(x == y) // является false, потому что вы не можете сравнивать объекты.
```

### 6. Автоматическое преобразование типов.

Остерегайтесь автоматических преобразований типов
Помните, что числа могут быть случайно преобразованы в строки или `NaN` (Not a Number / Не число).

JavaScript слабо типизирован. Переменная может содержать разные типы данных, а переменная может изменять свой тип данных:
```
var x = "Hello";     // по типу x является строкой
x = 5;               // изменение типа x на число
```

При выполнении математических операций JavaScript может преобразовывать числа в строки:
```
var x = 5 + 7;       // x.valueOf() является 12,  тип x является числом
var x = 5 + "7";     // x.valueOf() является 57,  тип x является строкой
var x = "5" + 7;     // x.valueOf() является 57,  тип x является строкой
var x = 5 - 7;       // x.valueOf() является -2,  тип x является числом
var x = 5 - "7";     // x.valueOf() является -2,  тип x является числом
var x = "5" - 7;     // x.valueOf() является -2,  тип x является числом
var x = 5 - "x";     // x.valueOf() является NaN, тип x является числом
```

Вычитание строки из строки не генерирует ошибку, но возвращает `NaN` (Not a Number):
```
"Hello" - "Dolly"    // возвращает NaN
```

### 7. Параметры по умолчанию

Использование параметров по умолчанию
Если функция вызывается с отсутствующим аргументом, значение отсутствующего аргумента устанавливается в `undefined` (не определено).

Неопределенные значения могут нарушить ваш код. 
Это хорошая привычка назначать значения по умолчанию для аргументов.

В приведённом ниже примере, в случае если при вызове функции значение для параметра `b` не передавалось, его значением становилось `undefined`,  и результатом вычисления `a * b` в функции `multiply` получалось значение `NaN`.
```
function multiply(a, b) {
  return a * b;
}

multiply(5, 2); // 10
multiply(5);    // NaN !
```

Чтобы  этого не происходило необходимо задать значение по умолчанию для параметра `b`:
```
function multiply(a, b = 1) {
  return a*b;
}

multiply(5, 2); // 10
multiply(5); // 5
multiply(5, undefined); // 5
```

## Производительность.

### 8. Ограничение доступа к переменным и свойствам.

Задача состоит в том, чтобы сократить время доступа к переменным и свойствам объектов в приложениях.

Причина заключается в том, что при каждом обращении процессору необходимо получить доступ к элементу в памяти, чтобы вычислить его результаты. 
Следовательно, это действие нужно выполнять как можно реже.

Например, при наличии цикла не нужно писать следующее:
```
for (let i = 0; i < arr.length; i++) {}
```

Лучше использовать данный вариант:
```
let length = arr.length;
for (let i = 0; i < length; i++) {}
```
Таким образом, на arr.length ссылаются один раз за цикл, а не обращаются к нему на каждой итерации.

### 9. Не объявляйте ненужные переменные.

При каждом объявлении переменных, браузер должен выделить пространство памяти для них. 
Следовательно, чтобы уменьшить использование памяти, необходимо сократить количество объявления переменных.

Для примера возьмем следующий HTML-код:
```
<div id='foo'>
  <p>

  </p>
</div>
```

Чтобы установить текстовое содержимое элемента p, не нужно писать ничего вроде:
```
const foo = document.querySelector('#foo');
const p = foo.querySelector('p');
p.textContent = 'foo';
```
поскольку у нас есть 2 переменные. Это означает, что компьютер должен хранить значения еще для 2 переменных JavaScript.

Вместо этого можно сократить объявления переменных с помощью:
```
document.querySelector('#foo p').textContent = 'foo';
```
Используйте метод querySelector, а также связанный метод querySelectorAll, для выбора элементов, поскольку они оба применяют CSS-селекторы для выбора любого узла элемента HTML.

## Чистный код

### 10. Следуйте строгому стилю программирования.

Каждый разработчик в команде будет иметь свой индивидуальный стиль кодинга, которому пожелает следовать, при стилизации своего кода. 
Это означает, что код будет иметь разные стили в разных местах, где работали разные программисты, что усложняет чтение кода другими разработчиками. 
В связи с этим, неплохо было бы следовать какому-то общему формату стилей. 
Мы можем стилизовать наш код автоматически с помощью таких программ, как `SLint` или `JSLint`, которые осуществляют статическую проверку нашего кода, чтобы убедиться, что он соответствует установленному стилю.

Есть также такие инструменты, как `Prettier`, для последовательного форматирования кода посредством стиля кода нашего приложения.

**Чистый код легко читается и поддерживается.** В нем не должно быть халтурных вещей, которые делают его трудным для чтения или отладки.
